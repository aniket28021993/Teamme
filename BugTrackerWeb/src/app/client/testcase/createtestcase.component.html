<p-toast [baseZIndex]="5000"></p-toast>

<div class="row">
  <div class="col-lg-12">
    <div class="card shadow-lg">
      <div class="card-header">
        <div class="row">
          <div class="col-lg-9 col-xs-12">
          </div>
          <div class="col-lg-3 col-xs-12 text-lg-right">
            <mat-form-field class="mat-dropdown">
              <mat-label>Select Backlog</mat-label>
              <mat-select [(ngModel)]="ProductBacklogId" [ngModelOptions]="{standalone: true}" (selectionChange)="BacklogEvents();" [disabled]="ProductBacklogobj.length==0">
                <mat-option *ngFor="let ProductBacklog of ProductBacklogobj" [value]="ProductBacklog.ProductBacklogId">
                  {{ProductBacklog.Title}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="card-body" *ngIf="ProductBacklogId != 0">
        <form class="p-3">
          <div class="row">
            <div class="col-xl-12">
              <label class="teamme-color">Title <span class="teamme-color">*</span></label>
              <mat-form-field class="w-100">
                <mat-label>Title</mat-label>
                <input matInput placeholder="Please enter title" [(ngModel)]="Title" [ngModelOptions]="{standalone: true}">
              </mat-form-field>
              <div class="text-left mt-1">
                <span class="text-danger" *ngIf="PopUperrortitle != undefined || PopUperrortitle != ''">{{PopUperrortitle}}</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-xl-6">
              <label class="teamme-color">Description</label>
              <mat-form-field class="w-100">
                <mat-label>Description</mat-label>
                <textarea matInput placeholder="Description" [(ngModel)]="Description" [ngModelOptions]="{standalone: true}"></textarea>
              </mat-form-field>              
            </div>
            <div class="col-xl-6">
              <label class="teamme-color">Pre-Condition</label>
              <mat-form-field class="w-100">
                <mat-label>Pre-Condition</mat-label>
                <textarea matInput placeholder="Pre-Condition" [(ngModel)]="PreCondition" [ngModelOptions]="{standalone: true}"></textarea>
              </mat-form-field>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-xl-6">
              <label class="teamme-color">Expected Result</label>
              <mat-form-field class="w-100">
                <mat-label>Expected Result</mat-label>
                <textarea matInput placeholder="Expected Result" [(ngModel)]="ExpectedResult" [ngModelOptions]="{standalone: true}"></textarea>
              </mat-form-field>              
            </div>
            <div class="col-xl-6">
              <label class="teamme-color">Actual Result</label>
              <mat-form-field class="w-100">
                <mat-label>Actual Result</mat-label>
                <textarea matInput placeholder="Actual Result" [(ngModel)]="ActualResult" [ngModelOptions]="{standalone: true}"></textarea>
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
              <label class="teamme-color">Steps</label>
            </div>
            <div class="col-11">
              <mat-form-field class="w-100">
                <mat-label>Enter Step Details</mat-label>
                <input matInput placeholder="Enter Step Details" [(ngModel)]="TestCaseStepTitle" [ngModelOptions]="{standalone: true}">
              </mat-form-field>
            </div>
            <div class="col-1">
              <button type="submit" class="btn btn-outline-primary" (click)="AddTestCaseStep()">Add</button>
            </div>
          </div>
          <div class="row" *ngIf="TestCaseSteps.length!=0">
            <div class="col-12" style="height:100px; overflow:auto;">
              <div *ngFor="let step of TestCaseSteps">
                <mat-form-field class="w-75">
                  <input matInput [(ngModel)]="step.Description" [ngModelOptions]="{standalone: true}">
                </mat-form-field>
                <i class="fa fa-trash teamme-color cur-pointer" (click)="DeleteTestCaseStep(step)"></i>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="card-body text-center" *ngIf="ProductBacklogId == 0">
        <img class="img-fluid px-xl-4 mt-xxl-n5" src="../../../assets/img/testcase.png" height="350" width="350">
        <h1 class="text-muted m-3"><a [routerLink]="['/backlog/create',PhaseId,ProjectId]">CREATE BACKLOG</a></h1>
      </div>

      <div class="card-footer" *ngIf="ProductBacklogId != 0">
        <div class="row page-menu">
          <div class="col-12 text-right">
            <button type="button" class="btn btn-outline-primary" (click)="CreateTestCase()" [disabled]="FormDisabled">Save changes</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

